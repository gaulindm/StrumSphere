
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>

<script src="{% static 'js/raphael.adaptivechord.js' %}"></script>
<script src="{% static 'js/song_simplescore.js' %}"></script>

    <!-- Local Stylesheets -->
    {% if pdf_generation %}
        <link rel="stylesheet" href="file://{{ STATIC_ROOT }}/songbook/main.css">
        <link rel="stylesheet" href="file://{{ STATIC_ROOT }}/songbook/song_simplescore.css">
    {% else %}
        <link rel="stylesheet" type="text/css" href="{% static 'songbook/main.css' %}">
        <link rel="stylesheet" href="{% static 'songbook/song_simplescore.css' %}">
    {% endif %}

    
{% if title %}
<title>Songbook - {{ score.songtitle }} </title>
{% else %}
<title>Songbook </title>
{% endif%}

</head>
<body>
    <header class="site-header">
        {% include "partials/_navbar.html" %}
      </header>


      <main role="main" class="container">
        <div class="row">
            <div class="col-md-8 col-12 bg-light">
                <!-- Page Area -->
                <div id="printableScore" style="background-color:#FFF; padding: 10px; border: 1px solid #ccc; border-radius: 5px; max-width: 800px; margin: 20px auto;">
                    <table id="song_header" table table-borderless style="width: 100%; margin: 0 auto; padding: 1;">
                        <tbody>
                            <tr style="height:fit-content;">
                                <td class="col-3" style="text-align: left;">
                                    {% if score.metadata.timeSignature %}
                                        {{ score.metadata.timeSignature }}
                                    {% endif %}
                                </td>
                                <td class="col-6" style="text-align: center; font-weight: bolder;">{{ score.songTitle }}</td>
                                
                                <td class="col-3" style="text-align: right;">
                                    {% if score.metadata.1stnote %}
                                        Premi√®re note: {{ score.metadata.1stnote }}
                                    {% endif %}
                                </td>

                            </tr>
                            <tr>
                                <td class="col-sm-3">
                                    
                                    {% if score.metadata.tempo %}
                                        {{ score.metadata.tempo }}
                                {% endif %}
                                    
                                    </td>
                                <td class="col-sm-6" style="text-align: center; font-weight: bolder;">{{ score.metadata.songwriter }}</td>
                                <td class="col-sm-3"></td>
                            </tr>
                            <tr>
                                <td colspan="3" style="text-align: center; " id="recording">{{ score.metadata.recording}} recording by {{ score.metadata.artist }} in {{ score.metadata.year }}</td>
                            </tr>
                        </tbody>
                    </table>
                
        
    
                <!-- Top Chord Placeholder -->
                <div id="top-chord-diagram-placeholder" class="col-12 d-none">
                
                </div>
    
                <!-- Lyrics and Chords Section -->
                <div id="lyrics-and-chords" class="row">
                    <!-- Left Chord Placeholder -->
                    <div id="left-chord-diagram-placeholder" class="col-2 d-none"></div>
    
                    <!-- Lyrics Container -->
                    <div class="col-12">
                        <div id="lyrics-container" class="lyrics-container">
                            <div id="song-content"></div>
                        </div>
                        
                    </div>
    
                    <!-- Right Chord Placeholder -->
                    <div id="right-chord-diagram-placeholder" class="col-2"></div>
                </div>
    
                <!-- Bottom Chord Placeholder -->
                <div id="bottom-chord-diagram-placeholder" class="col-12 d-none">
                    <!-- Chord Container -->
                    <div id="chord-container" class="d-none">
                        <div id="bottom-chord-container" class="chordbox">
                        <!-- Chords will be dynamically rendered here -->
                        </div>
                    </div>
                </div>


            </div>


        </div>
            
            <!-- Control Panel -->
            <div class="col-md-4 col-12 d-md-block">
                {% include "partials/_control_panel.html" %}
            </div>
        </div>
        

    </main>
    

       <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<!-- Layout Initialization -->




<script>
    const songDict = {{ score.lyrics_with_chords|safe }};
    document.getElementById('layout-form').addEventListener('change', () => {
    const selectedPosition = document.querySelector('input[name="diagram-position"]:checked').value;
    updateChordPHPosition(selectedPosition);
});

</script>
<script src="{% static 'js/song_simplescore.js' %}"></script>


</body>
</html>
